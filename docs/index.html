<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>documentation api-service-auth-easyclass</title>
</head>
<body>
    <header>
        <h1>Bienvenue sur la documentation de api d'authentification Easy class service</h1>
        <p>cette documentation est destiné à ceux qui connaissent faire des appel http côté client</p>
    </header>
    
    <sections>
        <h2> point de terminaison: http://localhost:3000/docs</h2>
        <p> type de méthode:  GET.</p>
        <p> il permet d'accèder à la documentation de l'api Oauth2.0 D'easyClass</p>
    </sections>

    <sections>
        <h2> point de terminaison: http://localhost:3000/</h2>
        <p> type de méthode:  GET.</p>
        <p> c'est le point de terminaison d'accueil !</p>
        <pre>
            <code>
                {message:"Bienvenue sur oauth2-easyclass api !"}
            </code>
        </pre>
    </sections>

    <section>
        <h2> Point de terminaison : http://localhost:3000/code</h2>
        <p> Type de Méthode: POST.</p>
        <p>Format du corps de la requête: application/x-www-form-urlencoded</p>
        <p>
            Ce end point permet à un client (application) d'obtenir le code<br/> 
            d'authorisation d'un utilisateur ayant valider votre accès et pourvoir<br/>
            échanger ce code contre un jeton<br/>
            ce code à une durée de 1 heure<br/> 
        </p>
        <pre>
            <p> corps de la requête</p>
            <code>
                {
                    client_id:"15637", //identifiant du client qui demande le code d'authorization
                    redirect_uri:"http://app.com/callback", //une des urls de redirection du client 
                    scope: ,/*Les permissions qu'on veut pour l'utilisateur
                        exemple: 'created:admin,deleted:profil' ou 'created:admin' ou [created:admin,deleted:profil]
                    */
                    state:"4",
                    username:"username",
                    password:"password",
                    response_type:"code",//uniquement code est authoriser
                    code_challenge:"monCodepourverifier"
                    code_challenge_method:"plain"/*les options sont "plain"
                    si le code_challenge ne sera pas n'est pas hachés
                    ou "s256" si l'est hachés avec algorithmes sh256.*/ 
                }
            </code>
        </pre>
        <p>Format de la reponses</p>
        <pre>
            <code>

            </code>
        </pre>
    </section>
    
    <sections>
        <h2> point de terminaison: http://localhost:3000/login</h2>
        <p> type de méthode:  POST.</p>
        <p> ce point de terminaison permet de founir un jeton jwt d'accès avec different octroi!</p>
        <section>
            <h3>Octroi: password</h3>
            <section>
                <p>Format du corps de la requête:  application/x-www-form-urlencoded </p>
                <p>Corps de la requête </p>
                <pre>
                    <code>
                        {
                            grant_type : "password",
                            username :"username",
                            password:"pasword",
                            scope:"created:admin",
                            client_id:"1899",
                            client_secret:"aahjdkndhj"
                        }
                    </code>
                </pre>
            </pre>
            <p>Format de la reponses</p>
            <pre>
                <code>
                    {
                        "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsInVzZXJOYW1lIjoiZHlsRWFzeURldiIsInNjb3BlIjpbImNyZWF0ZWQ6YWRtaW4iXSwiY2xpZW50SWQiOiIxNjYzOTM3NiIsImlhdCI6MTcxMjQ5NTEwMywiZXhwIjoxNzEzMDk5OTAzfQ.CoMeU3HLajaA7lSL1G3Qws7Bdcq0_lghRfKXyXOdIqI",
                        "token_type": "Bearer",
                        "expires_in": 604799,
                        "refresh_token": "677d6c562dba15621497cc023dba5704aee306f43506871df9cbc4d7799055a6",
                        "scope": "created:admin"
                    }
                </code>
            </pre>
            </section>
            <h3>Octroi: refresh_token</h3>
            <section>
                <p>Format du corps de la requête:  application/x-www-form-urlencoded </p>
                <p>Corps de la requête </p>
                <pre>
                    <code>
                        {
                            grant_type : "refresh_token",
                            refresh_token:"677d6c562dba15621497cc023dba5704aee306f43506871df9cbc4d7799055a6"
                            scope:"created:admin",
                            client_id:"1899",
                            client_secret:"aahjdkndhj"
                        }
                    </code>
                </pre>
            </pre>
            <p>Format de la reponses</p>
            <pre>
                <code>
                    {
                        "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsInVzZXJOYW1lIjoiZHlsRWFzeURldiIsInNjb3BlIjpbImNyZWF0ZWQ6YWRtaW4iXSwiY2xpZW50SWQiOiIxNjYzOTM3NiIsImlhdCI6MTcxMjQ5NTEwMywiZXhwIjoxNzEzMDk5OTAzfQ.CoMeU3HLajaA7lSL1G3Qws7Bdcq0_lghRfKXyXOdIqI",
                        "token_type": "Bearer",
                        "expires_in": 604799,
                        "refresh_token": "677d6c562dba15621497cc023dba5704aee306f43506871df9cbc4d7799055a6",
                        "scope": "created:admin"
                    }
                </code>
            </pre>
            </section>
            <h3>Octroi: authorization_code</h3>
            <section>
                <p>Format du corps de la requête:  application/x-www-form-urlencoded </p>
                <p>Corps de la requête </p>
                <pre>
                    <code>
                        {
                            grant_type : "authorization_code",
                            code:"",/*
                            le code de verification obtenu avec le end point http://localhost/code
                            */
                            code_verifier:"",// c'est le code code_challenge avec le quels vous avec eu le code authorisation
                            redirect_uri:"http://app.com/callback"
                            scope:"created:admin",
                            client_id:"1899",
                            client_secret:"aahjdkndhj"
                        }
                    </code>
                </pre>
            </pre>
            <p>Format de la reponses</p>
            <pre>
                <code>
                    {
                        "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsInVzZXJOYW1lIjoiZHlsRWFzeURldiIsInNjb3BlIjpbImNyZWF0ZWQ6YWRtaW4iXSwiY2xpZW50SWQiOiIxNjYzOTM3NiIsImlhdCI6MTcxMjQ5NTEwMywiZXhwIjoxNzEzMDk5OTAzfQ.CoMeU3HLajaA7lSL1G3Qws7Bdcq0_lghRfKXyXOdIqI",
                        "token_type": "Bearer",
                        "expires_in": 604799,
                        "refresh_token": "677d6c562dba15621497cc023dba5704aee306f43506871df9cbc4d7799055a6",
                        "scope": "created:admin"
                    }
                </code>
            </pre>
            </section>
            <h3>Octroi: client_credentials</h3>
            <section>
                <p>Format du corps de la requête:  application/x-www-form-urlencoded </p>
                <p>Corps de la requête </p>
                <pre>
                    <code>
                        {
                            grant_type : "client_credentials",
                            scope:"created:admin",
                            client_id:"1899",
                            client_secret:"aahjdkndhj"
                        }
                    </code>
                </pre>
            </pre>
            <p>Format de la reponses</p>
            <pre>
                <code>
                    {
                        "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsInVzZXJOYW1lIjoiZHlsRWFzeURldiIsInNjb3BlIjpbImNyZWF0ZWQ6YWRtaW4iXSwiY2xpZW50SWQiOiIxNjYzOTM3NiIsImlhdCI6MTcxMjQ5NTEwMywiZXhwIjoxNzEzMDk5OTAzfQ.CoMeU3HLajaA7lSL1G3Qws7Bdcq0_lghRfKXyXOdIqI",
                        "token_type": "Bearer",
                        "expires_in": 604799,
                        "refresh_token": "677d6c562dba15621497cc023dba5704aee306f43506871df9cbc4d7799055a6",
                        "scope": "created:admin"
                    }
                </code>
            </pre>
            </section>
        </section>

    </sections>

    <section>
       <h2>point de terminaison: http://localhost:3000/sign/teacher </h2>
       <p>type de methode: POST</p>
       <p> 
        il permet d'initialiser la création d'un enseignants en le sauvegardant temporairement
        pour qu'il valide le code qu'il a été envoyer par email
       </p>
       <p>Corps de la requête</p>
       <pre>
        <code>
            {
                addressMail:"bla@gmail.com",
                userName:"userName",
                password:"password",
                subjetName:"storyAfrica"
            }
        </code>
       </pre> 
       <p>Format de la reponses</p>
       <pre>
        <code>
            {
                "message": "userName Veillez consulter votre boite mail (bla@gmail.com) pour valider votre inscription !",
                "data": {
                    "id": 1,
                    "userName": "userName",
                    "addressMail": "bla@gmail.com",
                    "password": "$2a$10$.HmCls0l3Bi91BAsJLRILuj9O7dtCWv6e3zy4nUNdCrLJ/XnpNCfG",
                    "subjectName": "storyAfrica",
                    "updatedAt": "2024-04-11T11:47:32.812Z",
                    "createdAt": "2024-04-11T11:47:32.812Z"
                }
            }
        </code>
       </pre>
    </section>

    <section>
        <h2>point de terminaison: http://localhost:3000/sign/student </h2>
        <p>type de methode: POST</p>
        <p> 
         il permet d'initialiser la création d'un étudiant en le sauvegardant temporairement
         pour qu'il valide le code qu'il a été envoyer par email
        </p>
        <p>Corps de la requête</p>
        <pre>
         <code>
             {
                 addressMail:"bla@gmail.com",
                 userName:"userName",
                 password:"password"
             }
         </code>
        </pre> 
        <p>Format de la reponses</p>
        <pre>
         <code>
            {
                "message": "userName Veillez consulter votre boite mail bla@gmail.com pour valider votre inscription",
                "data": {
                    "id": 1,
                    "userName": "userName",
                    "addressMail": "bla@gmail.com",
                    "password": "$2a$10$QJGAsMBGv/jyAaOnCdZx4.NqlkjYgNSI.S7KahFzHPj.zgw7qLiWO",
                    "updatedAt": "2024-04-11T11:34:35.882Z",
                    "createdAt": "2024-04-11T11:34:35.882Z"
                }
            }
         </code>
        </pre>
    </section>

    <section>
        <h2>point de terminaison: http://localhost:3000/sign/admin </h2>
        <p>type de methode: POST</p>
        <p> 
         il est réserver au administrateur pour en créer d'autre . Faudra ajouter le jeton jwt à la demande
         <code>
            header:{
                authorization:""//Bearer token
             }
         </code>
        </p>
        <p>Corps de la requête</p>
        <pre>
         <code>
             {
                 addressMail:"bla@gmail.com",
                 userName:"userName",
                 password:"password"
             }
         </code>
        </pre> 
        <p>Format de la reponses</p>
        <pre>
         <code>
             
         </code>
        </pre>
    </section>

    <section>
        <h2>point de terminaison: http://localhost:3000/verifCode/:id </h2>
        <p>type de methode: POST</p>
        <p> 
         il permet de valider le code de verification envoyer par mail pour sauvegarder 
         de manière permanente l'utilisateur
         exemple de formulation du point de terminaison :http://localhost:3000/verifCode/1
        </p>
        <p>Corps de la requête</p>
        <pre>
         <code>
             {
                 codeVerif : 13344
             }
         </code>
        </pre> 
        <p>Format de la reponses</p>
        <pre>
         <code>
            {
                "message": "Bienvenu ramses chez easyclass.edu",
                "data": {
                    "id": 2,
                    "userName": "ramses",
                    "addressMail": "ramses@gmail.com",
                    "password": "$2a$10$QJGAsMBGv/jyAaOnCdZx4.NqlkjYgNSI.S7KahFzHPj.zgw7qLiWO",
                    "updatedAt": "2024-04-11T11:43:58.190Z",
                    "createdAt": "2024-04-11T11:43:58.190Z"
                }
            }
         </code>
        </pre>
    </section>

    <section>
        <h2>point de terminaison: http://localhost:3000/restartCode/:userName/:nametable </h2>
        <p>type de methode: PUT</p>
        <p> 
         il permet de rédemarrer un nouveau code de verif exemple :http://localhost:3000/restartCode/kamit/student,
         http://localhost:3000/restartCode/kamit/teacher, http://localhost:3000/restartCode/kamit/user
        </p>
        <p>Format de la reponses</p>
        <pre>
         <code>
            {
                "message": "Code de verification mis à jour ramses Veillez verifier votre boite mail ramses@gmail.com ",
                "data": {
                    "id": 2,
                    "codeverif": 6453,
                    "expiresAt": "2024-04-11T12:40:31.055Z",
                    "nameTable": "studentTemp",
                    "foreignId": 1,
                    "createdAt": "2024-04-11T11:34:36.000Z",
                    "updatedAt": "2024-04-11T11:40:31.059Z",
                    "deletedAt": null
                }
            }
         </code>
        </pre>
    </section>
    <footer>

    </footer>
</body>
</html>